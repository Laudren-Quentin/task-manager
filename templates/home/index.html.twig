{% extends 'base.html.twig' %}

{% block title %}Les Projets
{% endblock %}

{% block body %}

	<div class="example-wrapper">
		<h1>Les Projets</h1>
		<ul class="d-flex flex-wrap">
			{% for project in projects %}
				<li class="card m-4 p-4">
					<a href="{{ path('app_project_details', {'id': project[0].id}) }}">
						<h2>{{ project[0].title }}</h2>
					</a>
					<p><i class="fa-solid fa-user"></i>
						{{ project['teamSize'] }}</p>
					<p>Nombre total de tâches :
						{{ project['totalTasks'] }}</p>
					<p>Nombre de tâches complétées :
						{{ project['completedTasks'] }}</p>

					<div class="progress">
						<div class="progress-bar" role="progressbar" style="width: {% if project['totalTasks'] > 0 %}
							{{ ((project['completedTasks'] / project['totalTasks']) * 100)|number_format(2) }}{% else %}0
						{% endif %}%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                        {% if project['totalTasks'] > 0 %}
							{{ ((project['completedTasks'] / project['totalTasks']) * 100)|number_format(2) }}
                            {% else %}
                            0
						{% endif %}%
                        </div>
					</div>
					<p>Update :
						{{ project[0].updatedAt|date('d/m/Y') }}</p>
					<p>Chef :
						{{ project[0].creator.email }}</p>
				</li>
			{% endfor %}
		</ul>

	</div>
{% endblock %}
